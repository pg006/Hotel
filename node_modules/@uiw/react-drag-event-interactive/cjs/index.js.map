{
  "version": 3,
  "names": [
    "Interactive",
    "React",
    "forwardRef",
    "props",
    "ref",
    "prefixCls",
    "className",
    "onMove",
    "onDown",
    "reset",
    "container",
    "useRef",
    "hasTouched",
    "useState",
    "isDragging",
    "setDragging",
    "onMoveCallback",
    "useEventCallback",
    "onKeyCallback",
    "isValid",
    "event",
    "current",
    "isTouch",
    "handleMove",
    "useCallback",
    "preventDefaultMove",
    "isDown",
    "touches",
    "length",
    "buttons",
    "getRelativePosition",
    "handleMoveEnd",
    "toggleDocumentEvents",
    "state",
    "toggleEvent",
    "window",
    "addEventListener",
    "removeEventListener",
    "useEffect",
    "handleMoveStart",
    "nativeEvent",
    "filter",
    "Boolean",
    "join",
    "style",
    "touchAction",
    "displayName"
  ],
  "sources": [
    "../src/index.tsx"
  ],
  "sourcesContent": [
    "import React, { useRef, useState, useCallback, useEffect } from 'react';\nimport { isTouch, preventDefaultMove, getRelativePosition, Interaction, useEventCallback } from './utils';\n\nexport * from './utils';\n\nexport interface InteractiveProps extends React.HTMLAttributes<HTMLDivElement> {\n  prefixCls?: string;\n  onMove?: (interaction: Interaction, event: MouseEvent | TouchEvent) => void;\n  onDown?: (offset: Interaction, event: MouseEvent | TouchEvent) => void;\n}\n\nconst Interactive = React.forwardRef<HTMLDivElement, InteractiveProps>((props, ref) => {\n  const { prefixCls = 'w-color-interactive', className, onMove, onDown, ...reset } = props;\n  const container = useRef<HTMLDivElement>(null);\n  const hasTouched = useRef(false);\n  const [isDragging, setDragging] = useState(false);\n  const onMoveCallback = useEventCallback<Interaction, MouseEvent | TouchEvent>(onMove);\n  const onKeyCallback = useEventCallback<Interaction, MouseEvent | TouchEvent>(onDown);\n\n  // Prevent mobile browsers from handling mouse events (conflicting with touch ones).\n  // If we detected a touch interaction before, we prefer reacting to touch events only.\n  const isValid = (event: MouseEvent | TouchEvent): boolean => {\n    if (hasTouched.current && !isTouch(event)) return false;\n    hasTouched.current = isTouch(event);\n    return true;\n  };\n\n  const handleMove = useCallback(\n    (event: MouseEvent | TouchEvent) => {\n      preventDefaultMove(event);\n      // If user moves the pointer outside of the window or iframe bounds and release it there,\n      // `mouseup`/`touchend` won't be fired. In order to stop the picker from following the cursor\n      // after the user has moved the mouse/finger back to the document, we check `event.buttons`\n      // and `event.touches`. It allows us to detect that the user is just moving his pointer\n      // without pressing it down\n      const isDown = isTouch(event) ? event.touches.length > 0 : event.buttons > 0;\n      if (isDown && container.current) {\n        onMoveCallback && onMoveCallback(getRelativePosition(container.current!, event), event);\n      } else {\n        setDragging(false);\n      }\n    },\n    [onMoveCallback],\n  );\n\n  const handleMoveEnd = useCallback(() => setDragging(false), []);\n  const toggleDocumentEvents = useCallback((state: boolean) => {\n    const toggleEvent = state ? window.addEventListener : window.removeEventListener;\n    toggleEvent(hasTouched.current ? 'touchmove' : 'mousemove', handleMove);\n    toggleEvent(hasTouched.current ? 'touchend' : 'mouseup', handleMoveEnd);\n  }, []);\n\n  useEffect(() => {\n    toggleDocumentEvents(isDragging);\n    return () => {\n      isDragging && toggleDocumentEvents(false);\n    };\n  }, [isDragging, toggleDocumentEvents]);\n\n  const handleMoveStart = useCallback(\n    (event: React.MouseEvent | React.TouchEvent) => {\n      preventDefaultMove(event.nativeEvent);\n      if (!isValid(event.nativeEvent)) return;\n      onKeyCallback && onKeyCallback(getRelativePosition(container.current!, event.nativeEvent), event.nativeEvent);\n      setDragging(true);\n    },\n    [onKeyCallback],\n  );\n\n  return (\n    <div\n      {...reset}\n      className={[prefixCls, className || ''].filter(Boolean).join(' ')}\n      style={{\n        ...reset.style,\n        touchAction: 'none',\n      }}\n      ref={container}\n      tabIndex={0}\n      onMouseDown={handleMoveStart}\n      onTouchStart={handleMoveStart}\n    />\n  );\n});\n\nInteractive.displayName = 'Interactive';\n\nexport default Interactive;\n"
  ],
  "mappings": "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"
}